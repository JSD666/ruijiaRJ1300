#PROGRAM Shun_Parallel_ABC BEGIN
//三角顺线路边相及平行顺线路三相，调试，改成自动选点
// 主臂（接线）竖起伸出
#SEGMENT 1 01M_ShuQi BEGIN
#var_TCP_Ttool1=-0.06448999999999999,0.0207,0.28314999999999996,0.0,0.0,1.5902
#var_TCP_Ttool2_1=0.0,0.0,0.416,0.0,0.0,2.6183
#STRIP_ROTATE,1000
#STRIP_UPWARD
#MOVEJ1,1,0.229,0.002,0.676,0.015,0.055,-1.661,1.628,0.055,-2.831,-1.888,-1.548,-0.168,var_TCP_Ttool1,8.0,0.4,0.6
#MOVEJ1,1,.434265315782, .698418251309, .586887469546, -.148324881568, -.158054058472, -1.506931618802,1.258681058883667, -1.862976376210348, -2.07282001176943, -0.959076229725973, -1.6494725386248987, 1.3392424583435059,var_TCP_Ttool1,8.0,0.4,0.6
#CONNECT_SLEEVELOCK
#SEGMENT 1 01M_ShuQi END

// 从臂（剥线）抓线、锁线
#SEGMENT 2 02S_ZhuaXian BEGIN
#MOVEJ1,2,-0.164,-0.063,0.785,0.005,-0.019,1.894,-1.570,0.000,-2.875,-1.853,-1.566,-0.729,var_TCP_Ttool2_1,8.0,0.4,0.6
#MOVEJ1,2,0.435,-0.093,0.673,0.137,0.191,1.633,0.150,-1.590,-2.792,-0.541,-1.584,-2.701,var_TCP_Ttool2_1,8.0,0.4,0.6
#STRIP_LINKRIGHT
#LIDARTOMA1_AT,1,2,2,var_PP_PYinLiuXian1,400,var_PP_PpreYinLiuXian1,0,-90,0,600,880,-188,-90,0,500,880,测量引流线
//由剥线位置换算到U型槽
#OFFSET,var_PP_PYinLiuXian1,var_TCP_Ttool2_1,1,6,-90,var_PP_PYinLiuXian1
#OFFSET,var_PP_PYinLiuXian1,var_TCP_Ttool2_1,1,1,0.1,var_PP_PYinLiuXian1
#OFFSET,var_PP_PYinLiuXian1,var_TCP_Ttool2_1,1,3,0.1,var_PP_PYinLiuXian1
#OFFSET,var_PP_PpreYinLiuXian1,var_TCP_Ttool2_1,1,6,-90,var_PP_PpreYinLiuXian1
#OFFSET,var_PP_PpreYinLiuXian1,var_TCP_Ttool2_1,1,1,0.1,var_PP_PpreYinLiuXian1
#OFFSET,var_PP_PpreYinLiuXian1,var_TCP_Ttool2_1,1,3,0.1,var_PP_PpreYinLiuXian1
#MOVEJ1,2,1.133,0.463,0.154,0.974,0.877,1.606,0.767,-2.385,-1.825,-1.547,-0.963,-2.763,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.963,-0.047,-0.374,1.558,0.383,0.341,0.695,-2.893,-1.410,-1.918,0.226,-2.698,var_TCP_Ttool2_1,8.0,0.2,0.3
//此处建议作判断，防止引流线过近时，由可变路点得到的运动路径与雷达罩碰撞。
//U型槽抓线预备可变路点
#MOVEJ3,2,var_PP_PpreYinLiuXian1,var_TCP_Ttool2_1,8.0,0.2,0.3
//U型槽抓线可变路点
#MOVEL2,2,var_PP_PYinLiuXian1,var_TCP_Ttool2_1,8.0,0.2,0.3
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
#STRIP_LINKLEFT
#SEGMENT 2 02S_ZhuaXian END

// 从臂（剥线）举线
#SEGMENT 3 03S_JuXian BEGIN
//U型槽抓线可变路点
#MOVEL2,2,var_PP_PYinLiuXian1,var_TCP_Ttool2_1,8.0,0.2,0.3
#var_PP_PTiaoZheng=var_PP_PYinLiuXian1
#var_PP_PTiaoZheng[3]=1.697
#var_PP_PTiaoZheng[4]=0.374
#var_PP_PTiaoZheng[5]=0.281
#MOVEJ3,2,var_PP_PTiaoZheng,var_TCP_Ttool2_1,8.0,0.2,0.3
//#MOVEJ1,2,0.835,-0.475,-0.605,1.697,0.374,0.281,0.230,-3.134,-1.442,-2.391,-0.242,-1.976,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,1.237,-0.071,-0.127,1.657,0.046,1.838,0.364,-2.648,-1.702,-1.651,-0.827,-1.713,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.950,-0.089,0.516,1.057,-0.107,2.783,0.219,-1.931,-2.244,-1.223,-1.312,-1.350,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.600,-0.141,0.871,0.025,-0.036,3.128,0.052,-1.629,-2.225,-0.874,-1.555,-1.114,var_TCP_Ttool2_1,8.0,0.2,0.3
#SEGMENT 3 03S_JuXian END

// 主臂（接线）穿线。 
#SEGMENT 4 04M_ChuangXian BEGIN
#var_TCP_Ttool1=-0.06448999999999999,0.0207,0.28314999999999996,0.0,0.0,1.5902
#var_TCP_Ttool2_1=0.0,0.0,0.416,0.0,0.0,2.6183
#MOVEJ1,1,.434265315782, .698418251309, .586887469546, -.148324881568, -.158054058472, -1.506931618802,1.258681058883667, -1.862976376210348, -2.07282001176943, -0.959076229725973, -1.6494725386248987, 1.3392424583435059,var_TCP_Ttool1,8.0,0.2,0.3
//提示选点
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//引流线穿线选点步骤
#LIDARTOMA2_AT,2,1,1,var_PP_PYinLiuXian2,400,var_PP_PpreYinLiuXian2,267,-44,0,800,1000,200,-44,0,800,1	000,穿引流线测量
//主臂携带接线工具穿线预备可变路点（MOVEJ还是MOVEL？）
#OFFSET,var_PP_PpreYinLiuXian2,var_TCP_Ttool1,1,6,-5,var_PP_PpreYinLiuXian2
#OFFSET,var_PP_PYinLiuXian2,var_TCP_Ttool1,1,6,-5,var_PP_PYinLiuXian2
#MOVEJ3,1,var_PP_PpreYinLiuXian2,var_TCP_Ttool1,8.0,0.2,0.3
//主臂携带接线工具穿线可变路点（MOVEJ还是MOVEL？）
#MOVEL2,1,var_PP_PYinLiuXian2,var_TCP_Ttool1,8.0,0.2,0.3
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//下点为穿线停止固定位置，考虑避免与U型槽碰撞）
#GETMAPOS,2,var_PP_MCheBoXian,var_Joint_MCheBoXian,var_TCP_Ttool2_1
#var_PP_MZhuChuanXian=var_PP_MCheBoXian
#ADD,var_PP_MZhuChuanXian[0],var_PP_MZhuChuanXian[0],0.012
#ADD,var_PP_MZhuChuanXian[1],var_PP_MZhuChuanXian[1],-0.4
#ADD,var_PP_MZhuChuanXian[2],var_PP_MZhuChuanXian[2],-0.144
#ADD,var_PP_MZhuChuanXian[3],0,-0.027
#ADD,var_PP_MZhuChuanXian[4],0,-0.050
#ADD,var_PP_MZhuChuanXian[5],0,-1.695
//#MOVEJ1,1,0.613,-0.180,0.728,-0.027,-0.050,-1.695,-0.018,-1.611,-2.280,-0.808,-1.625,1.443,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEJ3,1,var_PP_MZhuChuanXian,var_TCP_Ttool1,8.0,0.2,0.3
#SEGMENT 4 04M_ChuangXian END

// 从臂（剥线）撤抓线
#SEGMENT 5 05S_Che_ZhuaXian BEGIN
//#MOVEL1,2,0.600,-0.141,0.871,0.025,-0.036,3.128,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEL2,2,var_PP_MCheBoXian,var_TCP_Ttool2_1,8.0,0.2,0.3
#STRIP_LINKRIGHT
#OFFSET,var_PP_MCheBoXian,var_TCP_Ttool1,1,3,-0.255,var_PP_MCheBoXian1
#MOVEL2,2,var_PP_MCheBoXian1,var_TCP_Ttool2_1,8.0,0.2,0.3
//#MOVEL1,2,0.527,-0.134,0.626,0.024,-0.036,3.128,var_TCP_Ttool2_1,8.0,0.2,0.3
#SEGMENT 5 05S_Che_ZhuaXian END

// 主臂（接线）贴线
#SEGMENT 6 06M_TieXian BEGIN
#var_TCP_Ttool1=-0.06448999999999999,0.0207,0.28314999999999996,0.0,0.0,1.5902
#var_TCP_Ttool2_1=0.0,0.0,0.416,0.0,0.0,2.6183
#MOVEL1,1,0.613,-0.180,0.728,-0.027,-0.050,-1.695,var_TCP_Ttool1,8.0,0.2,0.3
#OFFSET,var_PP_MZhuChuanXian,var_TCP_Ttool1,1,3,0.35,var_PP_MZhuChuanXian1
#MOVEL2,1,var_PP_MZhuChuanXian,var_TCP_Ttool1,8.0,0.2,0.3
//#MOVEL1,1,0.609,-0.163,1.074,-0.027,-0.050,-1.695,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEL1,1,0.509,-0.163,1.074,-0.027,-0.050,-1.695,var_TCP_Ttool1,8.0,0.2,0.3
//从臂进一步收回
#MOVEJ1,2,0.527,-0.134,0.626,0.024,-0.036,3.128,0.074,-2.026,-2.467,-0.234,-1.552,-1.132,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.252,-0.371,0.605,-0.064,0.356,-1.498,-0.623,-1.746,-2.895,-0.401,-1.587,1.202,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.026,-0.448,0.605,0.036,0.392,-2.028,-1.160,-1.746,-2.895,-0.401,-1.587,1.202,var_TCP_Ttool2_1,8.0,0.2,0.3
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//#MOVEJ1,1,.588151979800, -.610418524690, .880086689242, -.009489265859, .166500633238, -1.337929487892,-0.6638115088092249, -1.692129913960592, -1.8044622580157679, -1.3690169493304651, -1.5862792173968714, 2.4389665126800537,var_TCP_Ttool1,8.0,0.2,0.
#STRIP_INIT
//行线选点步骤
#LIDARTOMA2_AT,2,1,2,var_PP_PHangXian1,300,var_PP_PpreHangXian1,-285,-44,0,1400,1550,-170,-44,0,1400,1550,穿引流线测量
//主臂携带接线工具贴线预备可变路点（MOVEJ还是MOVEL？）
//主臂工具坐标系修正
#OFFSET,var_PP_PHangXian1,var_TCP_Ttool1,1,1,0.03,var_PP_PHangXian1
#OFFSET,var_PP_PHangXian1,var_TCP_Ttool1,1,6,-5,var_PP_PHangXian1
#OFFSET,var_PP_PHangXian1,var_TCP_Ttool1,1,2,-0.005,var_PP_PHangXian1
#OFFSET,var_PP_PHangXian1,var_TCP_Ttool1,1,3,-0.3,var_PP_PpreHangXian1
#MOVEJ3,1,var_PP_PpreHangXian1,var_TCP_Ttool1,8.0,0.2,0.3
//主臂携带接线工具贴线可变路点（MOVEJ还是MOVEL？）
#MOVEL2,1,var_PP_PHangXian1,var_TCP_Ttool1,8.0,0.2,0.3
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//确认水平滑台位置(或者移动主臂，以确定从臂剥线位置)
#RECORDSLIDERPOS,2,var_DOUBLE_SliderBoXian
#SEGMENT 6 06M_TieXian END

// 主臂（接线）至避让
#SEGMENT 7 07M_BiRang BEGIN
// 若采用移动主臂确定剥线位置，此处需按获取当前位置、偏移处理
//主臂携带接线工具贴线可变路点（MOVEJ还是MOVEL？）
#GETMAPOS,1,var_PP_MHangXian1,var_Joint_MHangXian1,var_TCP_Ttool1
#OFFSET,var_PP_MHangXian1,var_TCP_Ttool1,1,3,-0.3,var_PP_MPreHangXian1
#MOVEL2,1,var_PP_MHangXian1,var_TCP_Ttool1,8.0,0.2,0.3
//主臂携带接线工具贴线预备可变路点（MOVEJ还是MOVEL？）
#MOVEJ3,1,var_PP_MPreHangXian1,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEL1,1,.678763969870, -.175394184488, .610913575474, -.027017025766, -.050091242746, -1.695316610564,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEL1,1,0.962,-0.471,-0.086,-0.715,-0.084,-1.997,var_TCP_Ttool1,8.0,0.2,0.3
#SEGMENT 7 07M_BiRang END

// 从臂（剥线）去剥线
#SEGMENT 8 08S_Qu_BoXian BEGIN
#MOVEJ1,2,0.026,-0.448,0.605,0.036,0.392,-2.028,-1.160,-1.746,-2.895,-0.401,-1.587,1.202,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.252,-0.371,0.605,-0.064,0.356,-1.498,-0.623,-1.746,-2.895,-0.401,-1.587,1.202,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEL1,2,0.234,-0.256,0.826,0.001,0.008,-1.480,var_TCP_Ttool2_1,8.0,1.2,0.25
//行线选点步骤，确定剥线位置
#LIDARTOMA3_AT,2,2,2,var_DOUBLE_SliderBoXian,var_PP_PHangXian2,300,var_PP_PpreHangXian2,-33,-44,0,1400,1550,98,-44,0,1400,1550,穿引流线测量
#OFFSET,var_PP_PpreHangXian2,var_TCP_Ttool2_1,1,5,5,var_PP_PpreHangXian2
#OFFSET,var_PP_PHangXian2,var_TCP_Ttool2_1,1,5,5,var_PP_PHangXian2
#OFFSET,var_PP_PHangXian2,var_TCP_Ttool2_1,1,3,0.02,var_PP_PHangXian2
//从臂携带剥线工具剥线预备可变路点（MOVEJ还是MOVEL？）
#MOVEJ3,2,var_PP_PpreHangXian2,var_TCP_Ttool2_1,8.0,0.4,0.6
//主臂携带剥线工具剥线可变路点（MOVEJ还是MOVEL？）
#MOVEL2,2,var_PP_PHangXian2,var_TCP_Ttool2_1,8.0,0.2,0.3
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//#STRIP_ONEKEY
#SEGMENT 8 08S_Qu_BoXian END

// 从臂（剥线）撤剥线
#SEGMENT 9 09S_Che_BoXian BEGIN
//从臂携带剥线工具剥线可变路点（MOVEJ还是MOVEL？）
#GETMAPOS,2,var_PP_MHangXian2,var_Joint_MHangXian2,var_TCP_Ttool2_1
#OFFSET,var_PP_MHangXian2,var_TCP_Ttool2_1,1,3,-0.3,var_PP_MPreHangXian2
#MOVEL2,2,var_PP_MHangXian2,var_TCP_Ttool2_1,8.0,0.2,0.3
//从臂携带剥线工具剥线预备可变路点（MOVEJ还是MOVEL？）
#MOVEJ3,2,var_PP_MPreHangXian2,var_TCP_Ttool2_1,8.0,0.2,0.3
#MOVEJ1,2,0.234,-0.256,0.826,0.001,0.008,-1.480,-0.342,-1.152,-2.691,-0.878,-1.572,0.954,var_TCP_Ttool2_1,8.0,1.2,0.25
#MOVEL1,2,0.252,-0.371,0.605,-0.064,0.356,-1.498,var_TCP_Ttool2_1,8.0,1.2,0.25
#SEGMENT 9 09S_Che_BoXian END

// 主臂（接线）去接线
#SEGMENT 10 10M_Qu_JieXian BEGIN
#MOVEL1,1,0.962,-0.471,-0.086,-0.715,-0.084,-1.997,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEL1,1,.678763969870, -.175394184488, .810913575474, -.027017025766, -.050091242746, -1.695316610564,var_TCP_Ttool1,8.0,1.2,0.25
#var_PP_HangXian2=var_PP_MHangXian2
#OFFSET,var_PP_PHangXian2,var_TCP_Ttool1,0,1,-0.1,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,0,2,-0.45,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,0,3,-0.3,var_PP_PPreJieXian
//主臂工具坐标系修正
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,1,6,-5,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,1,1,-0.085,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,1,2,-0.005,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,1,3,0.02,var_PP_PJieXian
#OFFSET,var_PP_PJieXian,var_TCP_Ttool1,1,3,-0.3,var_PP_PPreJieXian
//主臂携带接线工具接线预备可变路点（此前剥线位置）（MOVEJ还是MOVEL？）
#MOVEJ3,1,var_PP_PPreJieXian,var_TCP_Ttool1,8.0,0.2,0.3
//主臂携带接线工具接线可变路点（此前剥线位置）（MOVEJ还是MOVEL？）
#MOVEL2,1,var_PP_PJieXian,var_TCP_Ttool1,8.0,0.2,0.3
#CONNECT_SLEEVEUNLOCK
#MANUALLY CONFIRM,通知-人工确认-继续运行|转人工控制
//#CONNECT_TIGHTENSTART,0
#SEGMENT 10 10M_Qu_JieXian END

// 主臂（接线）撤接线
#SEGMENT 11 11M_Che_JieXian BEGIN
//主臂携带接线工具接线可变路点（此前剥线位置）（MOVEJ还是MOVEL？）
#GETMAPOS,1,var_PP_MJieXian,var_Joint_MJieXian,var_TCP_Ttool1
#OFFSET,var_PP_MJieXian,var_TCP_Ttool1,1,3,-0.3,var_PP_MPreJieXian
#MOVEL2,1,var_PP_MJieXian,var_TCP_Ttool1,8.0,0.2,0.3
#CONNECT_BRANCHLINEUNLOCK
#CONNECT_SLEEVELOCK
#CONNECT_CLIPUNLOCK
//主臂携带接线工具接线预备可变路点（此前剥线位置）（MOVEJ还是MOVEL？
#MOVEJ3,1,var_PP_MPreJieXian,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEL1,1,.673048234815, .055810789997, 1.001877955635, -.076852383862, -.153397388210, -1.690050167663,var_TCP_Ttool1,8.0,1.2,0.25
#MOVEJ1,1,.434265315782, .698418251309, .586887469546, -.148324881568, -.158054058472, -1.506931618802,1.258681058883667, -1.862976376210348, -2.07282001176943, -0.959076229725973, -1.6494725386248987, 1.3392424583435059,var_TCP_Ttool1,8.0,0.2,0.3
#SEGMENT 11 11M_Che_JieXian END

// 主臂（接线）、从臂（剥线）归零
#SEGMENT 12 12D_ToZero BEGIN
#MOVEL1,2,0.252,-0.371,0.605,-0.064,0.356,-1.498,var_TCP_Ttool2_1,8.0,1.2,0.25
#MOVEJ1,2,-0.164,-0.063,0.785,0.005,-0.019,1.894,-1.570,0.000,-2.875,-1.853,-1.566,-0.729,var_TCP_Ttool2_1,8.0,0.4,0.6
#MOVEJ1,1,.434265315782, .698418251309, .586887469546, -.148324881568, -.158054058472, -1.506931618802,1.258681058883667, -1.862976376210348, -2.07282001176943, -0.959076229725973, -1.6494725386248987, 1.3392424583435059,var_TCP_Ttool1,8.0,0.2,0.3
#MOVEJ1,1,0.229,0.002,0.676,0.015,0.055,-1.661,1.628,0.055,-2.831,-1.888,-1.548,-0.168,var_TCP_Ttool1,8.0,0.4,0.6
#SEGMENT 12 12D_ToZero END

#PROGRAM Shun_Parallel_ABC END
